<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>
        body {
            padding: 0;
            margin: 0;
            background: #333;
        }
        .remote {
            width: 100%;
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            display: flex;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="remote">
            <svg height="100%" width="100%">
                <svg viewBox="0 0 200 200" preserveAspectRatio="none">
                    <polygon 
                        v-for="remoteButton in remoteButtons"
                        :points="remoteButton.points"
                        @click="sendKey(remoteButton.key)"
                        opacity="0"
                        stroke="white"
                        stroke-width="1"
                    ></polygon>
                    <circle
                        cx="100"
                        cy="100"
                        r="35"
                        stroke="white"
                        opacity="0.2"
                        fill="none"
                        @click="sendKey('ok')"
                    >
                    <circle
                        cx="100"
                        cy="170"
                        r="20"
                        stroke="white"
                        opacity="0.2"
                        fill="none"
                        @click="sendKey('back')"
                    >
                    </circle>
                </svg>
                <svg viewBox="0 0 200 200">
                    <circle v-if="stage.ok" cx="100" cy="100" r="3" fill="white" opacity="0.2"></circle>
                    <circle v-if="stage.top" cx="100" cy="30" r="3" fill="white" opacity="0.2"></circle>
                    <circle v-if="stage.right" cx="170" cy="100" r="3" fill="white" opacity="0.2"></circle>
                    <circle v-if="stage.bottom" cx="100" cy="170" r="3" fill="white" opacity="0.2"></circle>
                    <circle v-if="stage.left"cx="30" cy="100" r="3" fill="white" opacity="0.2"></circle>
                </svg>
            </svg>
        </div>

    </div>

    <script src="https://unpkg.com/vue@2.0.3/dist/vue.js"></script>
    <script src="https://unpkg.com/kefir@3.5.2"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/eventemitter2@2.1.3"></script>
    <script>
        
        var ee = new EventEmitter2()

        new Vue({
            el: '#app',
            data: {
                remoteButtons: [
                    {key: 'top', points: '0,0 100,100 200,0'},
                    {key: 'left', points: '0,0 100,100 0,200'},
                    {key: 'bottom', points: '0,200 100,100 200,200'},
                    {key: 'right', points: '200,0 100,100 200,200'},
                ],
                socket: io(),
                stage: {}
            },
            methods: {
                sendKey: function(key) {
                    ee.emit('key', key)
                }
            },
            mounted() {
                var socket = io()
                ee.on('key', key => {
                    socket.emit('key', key)
                })
                socket.on('stage', stage => this.stage = stage)
            }
        })



    </script>

</body>
</html>

